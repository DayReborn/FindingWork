# 25年2月28日
## 手写一个简单版的vector
### 一、理解STL Vector的核心功能

- 动态数组，自动扩容
- 随机访问（O(1)时间复杂度）
- 部插入/删除（O(1)均摊时间）
- 支持迭代器
- 深拷贝语义

### 二、基础实现：框架与构造函数

1. 步骤 2.1：定义模板类

```c++
template <typename T>
class Vector {
private:
    T* data_ = nullptr;       // 数据指针
    size_t size_ = 0;         // 当前元素数量
    size_t capacity_ = 0;     // 当前分配的内存容量

public:
    // 默认构造函数
    Vector() = default;

    // 析构函数
    ~Vector() {
        delete[] data_;
    }

    // 基础功能占位
    size_t size() const { return size_; }
    size_t capacity() const { return capacity_; }
    bool empty() const { return size_ == 0; }
};
```

2. 步骤 2.2：实现push_back和扩容
```c++
void push_back(const T& value) {
    if (size_ >= capacity_) {
        // 扩容策略：容量为0时设为1，否则翻倍
        size_t new_cap = (capacity_ == 0) ? 1 : capacity_ * 2;
        reserve(new_cap);
    }
    data_[size_++] = value; // 在尾部插入元素
}

void reserve(size_t new_cap) {
    if (new_cap > capacity_) {
        T* new_data = new T[new_cap]; // 分配新内存
        // 复制旧数据到新内存
        for (size_t i = 0; i < size_; ++i) {
            new_data[i] = data_[i];
        }
        delete[] data_;      // 释放旧内存
        data_ = new_data;
        capacity_ = new_cap;
    }
}
```

3. 步骤 2.3：测试基础功能
```c++
Vector<int> v;
v.push_back(1);
v.push_back(2);
assert(v.size() == 2);
assert(v.capacity() == 2);
```